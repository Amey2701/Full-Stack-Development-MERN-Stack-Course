<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Women Fragrances Shop</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Custom scrollbar for filters categories */
    .scrollbar-thin::-webkit-scrollbar {
      width: 6px;
    }
    .scrollbar-thin::-webkit-scrollbar-thumb {
      background-color: #94a3b8;
      border-radius: 3px;
    }
    .scrollbar-thin {
      scrollbar-width: thin;
      scrollbar-color: #94a3b8 transparent;
    }
    /* Ellipses for longer text */
    .line-clamp-2 {
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;  
      overflow: hidden;
    }
    /* Card Hover Glow */
    .product-card:hover {
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      transition: box-shadow 0.3s ease-in-out;
    }
  </style>
</head>
<body class="bg-slate-50 min-h-screen flex flex-col font-sans">

  <!-- Top Navigation -->
  <header class="bg-slate-100 py-2 px-4 border-b border-slate-300 select-none">
    <nav class="container mx-auto flex flex-wrap gap-3 text-xs text-slate-700 font-medium items-center justify-center md:justify-start">
      <a href="#" class="hover:text-teal-600">Covid Essentials</a>
      <a href="#" class="hover:text-teal-600">Diabetes</a>
      <a href="#" class="hover:text-teal-600">Cardiac Care</a>
      <a href="#" class="hover:text-teal-600">Stomach Care</a>
      <a href="#" class="hover:text-teal-600">Ayurvedic</a>
      <a href="#" class="hover:text-teal-600">Homeopathy</a>
      <a href="#" class="hover:text-teal-600">Fitness</a>
      <a href="#" class="hover:text-teal-600">Mom & Baby</a>
      <a href="#" class="hover:text-teal-600">Devices</a>
      <a href="#" class="hover:text-teal-600">Surgicals</a>
      <a href="#" class="hover:text-teal-600">Sexual Wellness</a>
      <a href="#" class="hover:text-teal-600">Treatments</a>
      <a href="#" class="hover:text-teal-600">Skin Care</a>
      <a href="#" class="hover:text-teal-600">Personal Care</a>
    </nav>
  </header>

  <!-- Page Main Wrapper -->
  <main class="container mx-auto flex flex-col md:flex-row gap-6 mt-4 flex-grow">

    <!-- Left Side Categories & Filters -->
    <aside class="w-full md:w-72 flex flex-col gap-6 sticky top-4 h-fit">
      <!-- Breadcrumb -->
        <nav class="w-full text-teal-700 text-sm font-medium" aria-label="Breadcrumb">
          <ol class="flex flex-row flex-nowrap items-center gap-1">
            <li class="flex items-center gap-1">
              <a href="#" class="hover:underline">Home</a>
              <span>›</span>
            </li>
            <li class="flex items-center gap-1">
              <a href="#" class="hover:underline">Non-Prescription</a>
              <span>›</span>
            </li>
            <li class="flex items-center gap-1">
              <a href="#" class="hover:underline">Fragrances</a>
              <span>›</span>
            </li>
            <li class="flex items-center gap-1 text-teal-900 font-semibold">
              Women
            </li>
          </ol>
        </nav>

      <!-- Categories Section -->
      <section aria-label="Categories" class="bg-white rounded-md shadow overflow-hidden py-4 px-4">
        <h2 class="font-semibold text-slate-800 mb-3 border-b border-slate-300 pb-2">Categories</h2>
        <div class="max-h-64 overflow-y-auto scrollbar-thin pr-1">
          <div>
            <button aria-expanded="true" aria-controls="fragMenu" class="flex items-center w-full text-left text-slate-800 font-semibold mb-1 focus:outline-none" id="fragHeading">
              <svg class="mr-2 h-4 w-4 fill-current transition-transform" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 9l4 4 4-4"/></svg>
              Fragrances
            </button>
            <ul id="fragMenu" class="pl-6 text-sm text-slate-600 space-y-0.5" role="region" aria-labelledby="fragHeading">
              <li><a href="#" class="hover:underline">Men</a></li>
              <li><a href="#" class="hover:underline">Unisex</a></li>
              <li><a href="#" class="hover:underline font-semibold text-teal-700">Women</a></li>
            </ul>
          </div>
          <div>
            <button aria-expanded="false" aria-controls="makeupMenu" class="flex w-full items-center justify-between text-left text-slate-700 font-semibold border-t border-slate-200 py-1 focus:outline-none">
              <span>Make-Up</span>
              <svg class="h-4 w-4 fill-current transition-transform" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 15l4-4 4 4"/></svg>
            </button>
          </div>
          <div>
            <button aria-expanded="false" aria-controls="hairMenu" class="flex w-full items-center justify-between text-left text-slate-700 font-semibold border-t border-slate-200 py-1 focus:outline-none">
              <span>Hair</span>
              <svg class="h-4 w-4 fill-current transition-transform" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8 15l4-4 4 4"/></svg>
            </button>
          </div>
          <!-- More categories can be added similarly -->
        </div>
      </section>

      <!-- Filters Section -->
      <section aria-label="Filters" class="bg-white rounded-md shadow py-4 px-4 overflow-y-auto scrollbar-thin max-h-[70vh]">
        <h2 class="font-semibold text-slate-800 mb-3 border-b border-slate-300 pb-2">Filters</h2>

        <!-- Brands Filter -->
        <div class="mb-5">
          <h3 class="font-semibold mb-2">Brands</h3>
          <div class="relative text-slate-600 mb-2">
            <input type="search" id="brand-search" placeholder="Search..." class="w-full border border-slate-300 rounded-md pl-8 pr-3 py-1 focus:outline-none focus:ring-1 focus:ring-teal-500 focus:border-teal-500" aria-label="Search brands" />
            <svg class="absolute left-2 top-2.5 h-4 w-4 fill-current text-slate-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/></svg>
          </div>
          <div class="max-h-48 overflow-y-auto scrollbar-thin pl-1 text-sm text-slate-700 space-y-2 border border-slate-200 rounded-md px-3 py-2">
            <!-- Brand checkboxes will be dynamically inserted here -->
            <div><label><input type="checkbox" class="brand-checkbox mr-2" value="Ajmal" />Ajmal (5)</label></div>
            <div><label><input type="checkbox" class="brand-checkbox mr-2" value="Armaf" />Armaf (33)</label></div>
            <div><label><input type="checkbox" class="brand-checkbox mr-2" value="Banderas" />Banderas (11)</label></div>
            <div><label><input type="checkbox" class="brand-checkbox mr-2" value="Betty Barclay" />Betty Barclay (9)</label></div>
            <div><label><input type="checkbox" class="brand-checkbox mr-2" value="Cacharel" />Cacharel (12)</label></div>
            <div><label><input type="checkbox" class="brand-checkbox mr-2" value="Carolina Herrera" />Carolina Herrera (11)</label></div>
            <div><label><input type="checkbox" class="brand-checkbox mr-2" value="Chopard" />Chopard</label></div>
            <div><label><input type="checkbox" class="brand-checkbox mr-2" value="DKNY" />DKNY</label></div>
            <div><label><input type="checkbox" class="brand-checkbox mr-2" value="Dorall Collection" />Dorall Collection</label></div>
            <div><label><input type="checkbox" class="brand-checkbox mr-2" value="Em5" />Em5</label></div>
            <div><label><input type="checkbox" class="brand-checkbox mr-2" value="Eva" />Eva</label></div>
            <div><label><input type="checkbox" class="brand-checkbox mr-2" value="Fabessentials" />Fabessentials</label></div>
            <div><label><input type="checkbox" class="brand-checkbox mr-2" value="Fogg" />Fogg</label></div>
            <div><label><input type="checkbox" class="brand-checkbox mr-2" value="Franck Olivier" />Franck Olivier</label></div>
            <div><label><input type="checkbox" class="brand-checkbox mr-2" value="Giordano" />Giordano</label></div>
          </div>
        </div>

        <!-- Price Filter -->
        <div class="mb-4">
          <h3 class="font-semibold mb-2">Price Range (₹)</h3>
          <div class="flex gap-2">
            <input type="number" id="price-min" placeholder="Min" class="w-20 border border-slate-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-teal-500" min="0"/>
            <input type="number" id="price-max" placeholder="Max" class="w-20 border border-slate-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-teal-500" min="0"/>
          </div>
        </div>

        <!-- Discount Filter -->
        <div class="mb-4">
          <h3 class="font-semibold mb-2">Minimum Discount (%)</h3>
          <input type="number" id="discount-min" placeholder="e.g. 10" min="0" max="100" class="w-20 border border-slate-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-teal-500"/>
        </div>

        <!-- Availability Filter -->
        <div>
          <label class="inline-flex items-center space-x-2 text-sm text-slate-800 font-semibold">
            <input type="checkbox" id="exclude-out-stock" />
            <span>Exclude out of stock</span>
          </label>
        </div>

        <!-- Clear filters button -->
        <button id="clear-filters" type="button" class="mt-4 bg-teal-600 hover:bg-teal-700 text-white px-3 py-1 rounded-md text-sm w-full font-semibold">Clear Filters</button>
      </section>
    </aside>

    <!-- Main Content: Banner, Sorting, Products -->
    <section class="flex-1 flex flex-col gap-5">
      <!-- Banner -->
      <div aria-label="Product banner" class="bg-white rounded-md shadow h-40 flex items-center justify-center overflow-hidden">
        <img 
          src="https://www.netmeds.com/images/category/v1/3695/women.jpg" 
          alt="Elegant perfume bottles for women fragrance displayed in a row on white background with soft shadows" 
          class="object-contain h-full"
          onerror="this.style.display='none'" 
        />
      </div>

      <!-- Showing & Sort -->
      <div class="flex flex-col md:flex-row justify-between items-center text-sm text-slate-700 font-semibold gap-3">
        <div>
          Showing <span id="shown-count">20</span> of <span id="total-count">651</span> items
        </div>
        <div class="flex gap-2 items-center flex-wrap justify-center md:justify-start">
          <span>Sort by:</span>
          <button type="button" class="sort-btn px-3 py-1 rounded-full border border-teal-500 text-teal-600 font-semibold" data-sort="popularity" aria-pressed="true">Popularity</button>
          <button type="button" class="sort-btn px-3 py-1 rounded-full border border-slate-300 text-slate-600 font-semibold" data-sort="high-to-low" aria-pressed="false">High to Low</button>
          <button type="button" class="sort-btn px-3 py-1 rounded-full border border-slate-300 text-slate-600 font-semibold" data-sort="low-to-high" aria-pressed="false">Low to High</button>
          <button type="button" class="sort-btn px-3 py-1 rounded-full border border-slate-300 text-slate-600 font-semibold" data-sort="discount" aria-pressed="false">Discount</button>
        </div>
      </div>

      <!-- All products container -->
      <div id="products-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5">
        <!-- Product cards will be inserted dynamically here -->
      </div>

      <!-- Pagination -->
      <nav aria-label="Pagination" class="flex justify-center items-center mt-8 mb-12 space-x-3 select-none">
        <button id="prev-page" class="px-3 py-1 border border-slate-300 rounded hover:bg-slate-200 disabled:opacity-50" disabled>Prev</button>
        <div id="page-numbers" class="flex space-x-2 font-semibold text-slate-700"></div>
        <button id="next-page" class="px-3 py-1 border border-slate-300 rounded hover:bg-slate-200">Next</button>
      </nav>

      <!-- Footer-like area with text info -->
      <article aria-label="Informational Content" class="bg-white rounded-md shadow p-4 mb-10 text-slate-800 max-w-7xl mx-auto leading-relaxed space-y-4 text-sm">
        <h2 class="font-bold text-lg">Perfumes For Women</h2>
        <p>With so many perfumes on the market, finding the best women's perfume is a process of elimination, and the difference between good and great is something to think about. The best perfumes tell a story through their notes, how well they are made, and how they make you feel. The right fragrance can evoke emotions, take you back to a happy time, or make you smile.</p>

        <h3 class="font-semibold text-md">Pick Your Notes</h3>
        <p>Each cologne or perfume comprises different <q>notes</q>, which make up the scent. These layers are called base, top or head, with middle or heart notes, and they all work together to make a particular scent. Some perfumes, for example, are called floral because they smell like gardenia, rose, or geranium, among other things. Some may have hints of apple or citrus, making them a bit fruitier. Spices like cinnamon and star anise are used in perfumes that smell exotic. You can browse and review women’s <a href="#" class="text-teal-700 hover:underline">perfume online</a>, to find out more about the different notes used to make colognes and perfumes so you can decide which ones you like best.</p>

        <h3 class="font-semibold text-md">Types of concentration</h3>
        <p>There are four different levels of how strong a scent is. Most of the time, the price goes up as the concentration goes up. Also, colognes and perfumes with a high concentration smell stronger and last longer. The strongest one is just called perfume or "parfum". With one application to the wrists or pulse points, this level that lasts all day. The next level of lower concentration is "eau de parfum", which lasts for about five hours after it has been applied. The level is followed by <q>eau de toilette</q>, which is usually not too expensive. The lowest level of fragrance is eau de cologne, which has the least amount of scent and only lasts for just over an hour.</p>

        <h3 class="font-semibold text-md">Finding your match</h3>
        <p>Try a fragrance test to make sure the ladies' perfume is something you will want to wear and enjoy. Fragrances smell different to different people, and there are plenty of beautiful fragrances that may not excite you. Dab a drop or spray the perfume on the inside of your wrist, wait a few minutes, and then smell the scent on your skin. Your skin has its own code of pheromones that can alter how a fragrance smells. Your own chemical make-up can sometimes make the smell stronger or weaker. The scent can also change if your chemistry doesn’t match the scent. Fragrances interact with the chemistry of your body in certain ways, and some notes and smells may become unique to you. What works well with your unique essence could give off a whole different scent when applied to someone else. Choosing the fragrance that best complements your own style can be a memorable experience that compels you to return to your favourites again and again.</p>

        <h3 class="font-semibold text-md">How to Apply Women's Perfume</h3>
        <p>The key to wearing perfume depends on where you spray the perfume. Spraying your fragrance directly onto the skin will allow it to linger for the entire day.</p>
        <ul class="list-disc list-inside space-y-1 mb-4">
          <li>Concentrate on the pulse points, also known as the warmest portions of your body, with the wrist and the neck being the most common places.</li>
          <li>Behind the ears and in the inside of the elbows are two of the lesser-known spots that are great for maximising the strength and duration of your perfume‘s scent.</li>
          <li>Fragrance adheres most effectively to moistened skin, which is still another reason to moisturise on a routine basis and especially in humid regions.</li>
        </ul>

        <h3 class="font-semibold text-md">Types of Fragrances</h3>
        <p>French fragrances emanate an aura of refinement. The world's most popular fragrance notes originate in the French village of Grasse. Here are general guidelines about perfumes for ladies, including what notes to expect and why they form the best-smelling perfumes:</p>

        <p><strong>Floral Perfumes:</strong> Traditionally one of the most popular fragrance kinds, the greatest flower fragrances are instantly recognised, with many utilising lavender, tuberose, rose, jasmine, lilies, and peonies for a sweet and delicate aroma. Furthermore, floral notes are employed to attenuate or give nuance to a powerful perfume.</p>

        <p><strong>Woody fragrances:</strong> The category is regarded to be warm, with cedarwood, sandalwood, vetiver, and amber serving as their most prominent components. The woody family is further subdivided into mossy woods and dry woods, which include earthy, sweet undertones and woody smokiness, respectively, making the category a popular choice for evening wear.</p>

        <h3 class="font-semibold text-md">Perfumes, Deodorants & Body Sprays</h3>
        <p>Deodorants are used to mask undesirable body odours created by germs and perspiration, while perfumes may be applied to the body and to clothing, and it provides fragrances that are appreciated. On the other hand, body sprays mask body odours for a short while, but antiperspirant deodorants are designed to address the underlying cause. Anti-perspirant deodorants cover the sweat glands that secrete perspiration onto your skin. This prevents perspiration and germs from mingling. Also, deos lower the number of germs that are already on your skin.</p>

        <h2 class="font-bold text-lg">FAQs</h2>

        <h4 class="font-semibold">Which is the best perfume for ladies?</h4>
        <p>Your skin type is the most crucial factor in determining how a perfume will smell on you. Identify whether your skin is dry or oily. The oilier your skin, the less perfume you will need to achieve a noticeable fragrance, and the longer the scent will remain. The way certain notes and scents mix with your body chemistry can also make them unique to you. What smells good on you might smell very different on someone else. Finding your perfect scent is a process of elimination and can finally be a special moment that makes you want to smell the same scents over and over again. The perfume you connect with, is the best perfume for you.</p>

        <h4 class="font-semibold">What is the most popular women's perfume?</h4>
        <p>The floral family of scents is one of the most popular fragrances. Perfume brands that contain floral concentrations are the most popular perfumes. They are considered classics and never go out of style.</p>

        <h4 class="font-semibold">Shop by Top Manufacturers</h4>
        <p>
          <a href="#" class="text-teal-700 hover:underline">Ajmal & Sons</a> | 
          <a href="#" class="text-teal-700 hover:underline">Beauty Concepts Pvt. Ltd</a> | 
          <a href="#" class="text-teal-700 hover:underline">M/S Ajmal & Sons.</a> | 
          <a href="#" class="text-teal-700 hover:underline">Baccarose Perfumes & Beauty Products PVT Ltd</a> | 
          <a href="#" class="text-teal-700 hover:underline">AA ATTARWAL & CO</a>
        </p>
      </article>
    </section>

  </main>

  <!-- Cart modal/popup -->
  <div id="cart-modal" class="fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center hidden z-50 p-4">
    <div class="bg-white rounded-lg w-full max-w-md max-h-[90vh] overflow-y-auto relative shadow-lg">
      <header class="p-4 border-b border-slate-300 flex justify-between items-center">
        <h2 class="text-lg font-semibold text-slate-900">Your Cart (<span id="cart-count">0</span>)</h2>
        <button id="close-cart" aria-label="Close cart" class="text-slate-700 hover:text-teal-600 font-bold">&times;</button>
      </header>
      <div id="cart-items" class="p-4 flex flex-col gap-4 min-h-[120px] max-h-[400px] overflow-y-auto text-sm text-slate-800">
        <p class="text-center text-slate-500" id="empty-cart-msg">Your cart is empty.</p>
      </div>
      <footer class="p-4 border-t border-slate-300 flex items-center justify-between">
        <div>
          <strong>Total:</strong> ₹ <span id="cart-total">0.00</span>
        </div>
        <button id="checkout-btn" class="bg-teal-600 hover:bg-teal-700 rounded px-4 py-2 text-white font-semibold disabled:opacity-50" disabled>Checkout</button>
      </footer>
    </div>
  </div>

  <!-- Floating Cart Button -->
  <button id="cart-btn" aria-label="Open Cart" class="fixed bottom-8 right-8 bg-teal-600 p-4 rounded-full shadow-lg text-white hover:bg-teal-700 focus:outline-none focus:ring-2 focus:ring-teal-400">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h2l.4 2M7 13h10l3-8H6.4M7 13l-2 5m5-5v6m4-6v6m4-6v6M16 21a1 1 0 11-2 0 1 1 0 012 0zM7 21a1 1 0 10-2 0 1 1 0 002 0z"/></svg>
    <span id="cart-badge" class="absolute top-0 right-0 bg-red-600 rounded-full text-xs px-1.5 py-0.5 -mt-1 -mr-1 font-bold hidden"></span>
  </button>

  <script>
    (() => {
      // Sample product data array
      const allProducts = [
        {
          id: 1,
          name: "Fogg Fragrant Body Spray for Women - Delicious 150 ml",
          brand: "Fogg",
          category: ["Fragrances", "Women"],
          price: 275,
          discountPercent: 0,
          image: "https://www.netmeds.com/images/product-v1/150x150/14086/fogg_fragrant_body_spray_for_women_delicious_150_ml_0.jpg",
          market: "Vini Cosmetics Pvt Ltd",
          stock: true,
          popularity: 80
        },
        {
          id: 2,
          name: "Fogg Fragrant Body Spray for Women - Delicious 120 ml",
          brand: "Fogg",
          category: ["Fragrances", "Women"],
          price: 191.25,
          discountPercent: 15,
          originalPrice: 225,
          image: "https://www.netmeds.com/images/product-v1/150x150/903282/fogg_fragrant_body_spray_for_women_delicious_120_ml_662488_0_0.jpg",
          market: "Vini Cosmetics Pvt Ltd",
          stock: true,
          popularity: 70
        },
        {
          id: 3,
          name: "United Colors Of Benetton Together For Her Eau De Toilette 80 ml",
          brand: "United Colors Of Benetton",
          category: ["Fragrances", "Women"],
          price: 2700,
          discountPercent: 0,
          image: "https://www.netmeds.com/images/product-v1/150x150/957413/united_colors_of_benetton_together_for_her_eau_de_toilette_80_ml_211981_0_1.jpg",
          market: "Beauty Concepts Pvt. Ltd",
          stock: false,
          popularity: 65
        },
        {
          id: 4,
          name: "Police Passion Femme Deodorant Spray 200 ml",
          brand: "Police",
          category: ["Fragrances", "Women"],
          price: 449,
          discountPercent: 0,
          image: "https://www.netmeds.com/images/product-v1/150x150/953187/police_passion_femme_deodorant_spray_200_ml_0_0.jpg",
          market: "Beauty Concepts Pvt. Ltd",
          stock: true,
          popularity: 50
        },
        {
          id: 5,
          name: "Police To Be Woman Eau de Parfum 40 ml",
          brand: "Police",
          category: ["Fragrances", "Women"],
          price: 2750,
          discountPercent: 0,
          image: "https://www.netmeds.com/images/product-v1/150x150/953175/police_to_be_woman_eau_de_parfum_125_ml_0_0.jpg",
          market: "Beauty Concepts Pvt. Ltd",
          stock: true,
          popularity: 45
        },
        {
          id: 6,
          name: "Police To Be Woman Eau de Parfum 125 ml",
          brand: "Police",
          category: ["Fragrances", "Women"],
          price: 4100,
          discountPercent: 0,
          image: "https://www.netmeds.com/images/product-v1/150x150/953175/police_to_be_woman_eau_de_parfum_125_ml_0_0.jpg",
          market: "Beauty Concepts Pvt. Ltd",
          stock: true,
          popularity: 40
        },
        {
          id: 7,
          name: "Playboy Wild Women Deodorant Spray 150 ml",
          brand: "Playboy",
          category: ["Fragrances", "Women"],
          price: 349,
          discountPercent: 0,
          image: "https://www.netmeds.com/images/product-v1/150x150/953144/playboy_wild_women_deodorant_spray_150_ml_0_0.jpg",
          market: "Beauty Concepts Pvt. Ltd",
          stock: true,
          popularity: 35
        },
        {
          id: 8,
          name: "Playboy Play It Sexy Deodorant 150ml",
          brand: "Playboy",
          category: ["Fragrances", "Women"],
          price: 349,
          discountPercent: 0,
          image: "https://www.netmeds.com/images/product-v1/150x150/953073/playboy_play_it_sexy_woman_deodorant_spray_150_ml_216661_0_1.jpg",
          market: "Beauty Concepts Pvt. Ltd",
          stock: true,
          popularity: 30
        },
        {
          id: 9,
          name: "United Colors of Benetton United Dreams Forever Green for Her Eau De Toilette 80 ml",
          brand: "Baccarose Perfumes & Beauty Products PVT Ltd",
          category: ["Fragrances", "Women"],
          price: 2700,
          discountPercent: 0,
          image: "https://www.netmeds.com/images/product-v1/150x150/1030302/united_colors_of_benetton_united_dreams_forever_green_for_her_eau_de_toilette_80_ml_1_0.jpg",
          market: "Baccarose Perfumes & Beauty Private Limited",
          stock: true,
          popularity: 25
        },
        {
          id: 10,
          name: "Nivea Pearl & Beauty Deodorant Roll On - Radiance 50ml",
          brand: "Nivea",
          category: ["Fragrances", "Women"],
          price: 234.06,
          discountPercent: 6,
          originalPrice: 249,
          image: "https://www.netmeds.com/images/product-v1/150x150/1061751/nivea_pearl_beauty_deodrant_roll_on_50ml_473304_0_0.jpg",
          market: "Nivea India Pvt Ltd",
          stock: true,
          popularity: 40
        },
        /* More products can be added or duplicated for demonstration */
        {
          id: 11,
          name: "Nivea Pearl & Beauty Deodorant 150 ml",
          brand: "Nivea",
          category: ["Fragrances", "Women"],
          price: 267.90,
          discountPercent: 6,
          originalPrice: 285,
          image: "https://www.netmeds.com/images/product-v1/150x150/1061751/nivea_pearl_beauty_deodrant_roll_on_50ml_473304_0_0.jpg",
          market: "Nivea India Pvt Ltd",
          stock: true,
          popularity: 38
        },
        {
          id: 12,
          name: "Engage Woman Spell 24Hrs Deo Spray 150 ml",
          brand: "Engage",
          category: ["Fragrances", "Women"],
          price: 220,
          discountPercent: 0,
          image: "https://www.netmeds.com/images/product-v1/150x150/13667/engage_woman_spell_deo_spray_165_ml_0.jpg",
          market: "ITC Limited",
          stock: false,
          popularity: 33
        }
      ];

      const PRODUCTS_PER_PAGE = 12;

      // Internal state for filters and sort
      let filters = {
        brands: new Set(),
        priceMin: null,
        priceMax: null,
        discountMin: 0,
        excludeOutStock: false,
      };
      let currentSort = "popularity"; // popularity, high-to-low, low-to-high, discount
      let currentPage = 1;

      // Cart State
      let cart = {};

      // Elements
      const productsContainer = document.getElementById("products-container");
      const brandSearchInput = document.getElementById("brand-search");
      const brandCheckboxes = document.querySelectorAll(".brand-checkbox");
      const priceMinInput = document.getElementById("price-min");
      const priceMaxInput = document.getElementById("price-max");
      const discountMinInput = document.getElementById("discount-min");
      const excludeOutStockCheckbox = document.getElementById("exclude-out-stock");
      const clearFiltersBtn = document.getElementById("clear-filters");
      const shownCountEl = document.getElementById("shown-count");
      const totalCountEl = document.getElementById("total-count");
      const sortButtons = document.querySelectorAll(".sort-btn");
      const prevPageBtn = document.getElementById("prev-page");
      const nextPageBtn = document.getElementById("next-page");
      const pageNumbersContainer = document.getElementById("page-numbers");
      const cartBtn = document.getElementById("cart-btn");
      const cartModal = document.getElementById("cart-modal");
      const closeCartBtn = document.getElementById("close-cart");
      const cartItemsContainer = document.getElementById("cart-items");
      const cartCountEl = document.getElementById("cart-count");
      const cartBadge = document.getElementById("cart-badge");
      const cartTotalEl = document.getElementById("cart-total");
      const emptyCartMsg = document.getElementById("empty-cart-msg");
      const checkoutBtn = document.getElementById("checkout-btn");

      // Utility Functions
      function sortProducts(products, sortKey) {
        const sorted = [...products];
        switch (sortKey) {
          case "popularity":
            sorted.sort((a, b) => b.popularity - a.popularity);
            break;
          case "high-to-low":
            sorted.sort((a, b) => b.price - a.price);
            break;
          case "low-to-high":
            sorted.sort((a, b) => a.price - b.price);
            break;
          case "discount":
            sorted.sort((a, b) => (b.discountPercent || 0) - (a.discountPercent || 0));
            break;
          default:
            break;
        }
        return sorted;
      }

      function filterProducts(products) {
        return products.filter((prod) => {
          if (filters.brands.size > 0 && !filters.brands.has(prod.brand)) return false;
          if (filters.priceMin !== null && prod.price < filters.priceMin) return false;
          if (filters.priceMax !== null && prod.price > filters.priceMax) return false;
          if ((prod.discountPercent || 0) < filters.discountMin) return false;
          if (filters.excludeOutStock && !prod.stock) return false;
          return true;
        });
      }

      function paginateProducts(products, page) {
        const start = (page - 1) * PRODUCTS_PER_PAGE;
        return products.slice(start, start + PRODUCTS_PER_PAGE);
      }

      function updateSortButtons() {
        sortButtons.forEach(btn => {
          const pressed = btn.dataset.sort === currentSort;
          btn.setAttribute("aria-pressed", pressed);
          if (pressed) {
            btn.classList.add("border-teal-500", "text-teal-600");
            btn.classList.remove("border-slate-300", "text-slate-600");
          } else {
            btn.classList.add("border-slate-300", "text-slate-600");
            btn.classList.remove("border-teal-500", "text-teal-600");
          }
        });
      }

      // Rendering Functions
      function renderProductCards(products) {
        productsContainer.innerHTML = "";
        if (products.length === 0) {
          productsContainer.innerHTML = '<p class="col-span-full text-center py-12 text-slate-600">No products match your filters.</p>';
          return;
        }
        products.forEach(product => {
          const productEl = document.createElement("article");
          productEl.className = "bg-white rounded-md p-4 shadow product-card flex flex-col";

          // image with placeholder & alt text from name
          const imgEl = document.createElement("img");
          imgEl.src = product.image;
          imgEl.alt = product.name + " - product image";
          imgEl.className = "object-contain h-48 w-full mb-3 rounded-md";
          imgEl.onerror = () => { imgEl.style.display = "none"; };
          productEl.appendChild(imgEl);

          // Product name
          const nameEl = document.createElement("h3");
          nameEl.textContent = product.name;
          nameEl.className = "font-semibold text-sm text-slate-900 mb-1 line-clamp-2";
          productEl.appendChild(nameEl);

          // Brands & categories tags
          const tagsContainer = document.createElement("div");
          tagsContainer.className = "mb-2 flex flex-wrap gap-2";
          product.category.forEach(cat => {
            const tag = document.createElement("span");
            tag.textContent = cat;
            tag.className = "bg-teal-100 text-teal-800 text-xs px-2 py-0.5 rounded-full select-none";
            tagsContainer.appendChild(tag);
          });
          productEl.appendChild(tagsContainer);

          // Market
          const marketEl = document.createElement("p");
          marketEl.className = "italic text-xs text-slate-600 mb-1";
          marketEl.textContent = `Mkt: ${product.market}`;
          productEl.appendChild(marketEl);

          // Price & Discount
          const priceContainer = document.createElement("div");
          priceContainer.className = "mb-3 text-sm font-semibold text-slate-900 flex items-baseline gap-2";
          if (product.discountPercent > 0 && product.originalPrice) {
            const discountedPrice = document.createElement("span");
            discountedPrice.textContent = `₹ ${product.price.toFixed(2)}`;
            discountedPrice.className = "text-teal-700";
            priceContainer.appendChild(discountedPrice);

            const originalPrice = document.createElement("span");
            originalPrice.textContent = `₹ ${product.originalPrice.toFixed(2)}`;
            originalPrice.className = "line-through text-slate-500 text-xs";
            priceContainer.appendChild(originalPrice);
          } else {
            priceContainer.textContent = `MRP ₹ ${product.price.toFixed(2)}`;
          }
          productEl.appendChild(priceContainer);

          // Stock status - dim Add To Cart if out stock
          const addToCartBtn = document.createElement("button");
          addToCartBtn.type = "button";
          addToCartBtn.textContent = product.stock ? "ADD TO CART" : "OUT OF STOCK";
          addToCartBtn.disabled = !product.stock;
          addToCartBtn.className = `${product.stock ? "bg-teal-600 hover:bg-teal-700" : "bg-gray-400 cursor-not-allowed"} text-white font-semibold py-2 rounded w-full transition-colors duration-200`;
          addToCartBtn.setAttribute("aria-label", (product.stock ? "Add " : "Out of stock ") + product.name + " to Cart");
          addToCartBtn.addEventListener("click", () => addToCart(product.id));
          productEl.appendChild(addToCartBtn);

          productsContainer.appendChild(productEl);
        });
      }

      function updatePagination(totalItems, currentPage) {
        pageNumbersContainer.innerHTML = "";
        const totalPages = Math.ceil(totalItems / PRODUCTS_PER_PAGE);
        // show up to 5 page numbers, centered around currentPage if possible
        let startPage = Math.max(1, currentPage - 2);
        let endPage = Math.min(totalPages, startPage + 4);
        if (endPage - startPage < 4) {
          startPage = Math.max(1, endPage - 4);
        }
        for (let i = startPage; i <= endPage; i++) {
          const btn = document.createElement("button");
          btn.type = "button";
          btn.textContent = i;
          btn.className = `px-3 py-1 rounded ${i === currentPage ? "bg-teal-600 text-white" : "bg-white border border-slate-300 hover:bg-slate-200"}`;
          btn.setAttribute("aria-current", i === currentPage ? "page" : "false");
          btn.addEventListener("click", () => {
            currentPage = i;
            renderFilteredSortedPaginated();
          });
          pageNumbersContainer.appendChild(btn);
        }
        prevPageBtn.disabled = currentPage === 1;
        nextPageBtn.disabled = currentPage >= totalPages;
      }

      // Filters handlers
      function onFiltersChange() {
        // update filters object from UI inputs
        // brands
        filters.brands = new Set(Array.from(brandCheckboxes).filter(cb => cb.checked).map(cb => cb.value));
        // price
        filters.priceMin = priceMinInput.value ? parseFloat(priceMinInput.value) : null;
        filters.priceMax = priceMaxInput.value ? parseFloat(priceMaxInput.value) : null;
        // discount
        filters.discountMin = discountMinInput.value ? parseFloat(discountMinInput.value) : 0;
        // excluding out of stock
        filters.excludeOutStock = excludeOutStockCheckbox.checked;

        currentPage = 1;
        renderFilteredSortedPaginated();
      }

      // Filtering brand list with search box
      function onBrandSearch() {
        const searchTerm = brandSearchInput.value.toLowerCase();
        brandCheckboxes.forEach(cb => {
          const label = cb.parentElement.textContent.toLowerCase();
          cb.parentElement.style.display = label.includes(searchTerm) ? "block" : "none";
        });
      }

      // Reset filters UI & state
      function clearFilters() {
        brandCheckboxes.forEach(cb => cb.checked = false);
        priceMinInput.value = "";
        priceMaxInput.value = "";
        discountMinInput.value = "";
        excludeOutStockCheckbox.checked = false;

        filters = {
          brands: new Set(),
          priceMin: null,
          priceMax: null,
          discountMin: 0,
          excludeOutStock: false,
        };
        currentPage = 1;

        renderFilteredSortedPaginated();
      }

      // Sorting handlers
      function onSortBtnClick(event) {
        const btn = event.currentTarget;
        const sortKey = btn.dataset.sort;
        if (sortKey === currentSort) return;
        currentSort = sortKey;
        updateSortButtons();
        currentPage = 1;
        renderFilteredSortedPaginated();
      }

      // Pagination buttons click handlers
      prevPageBtn.addEventListener("click", () => {
        if (currentPage > 1) {
          currentPage--;
          renderFilteredSortedPaginated();
        }
      });
      nextPageBtn.addEventListener("click", () => {
        const totalPages = Math.ceil(filteredProducts.length / PRODUCTS_PER_PAGE);
        if (currentPage < totalPages) {
          currentPage++;
          renderFilteredSortedPaginated();
        }
      });

      // Cart Management Functions

      // Load cart from localStorage or create empty if not exists
      function loadCart() {
        const cartJson = localStorage.getItem("perfume_cart");
        if (cartJson) {
          cart = JSON.parse(cartJson);
        } else {
          cart = {};
        }
        updateCartBadge();
      }

      // Save current cart state to localStorage
      function saveCart() {
        localStorage.setItem("perfume_cart", JSON.stringify(cart));
      }

      // Add product to cart or increase quantity if already added
      function addToCart(productId) {
        if (!cart[productId]) {
          cart[productId] = 1;
        } else {
          cart[productId]++;
        }
        saveCart();
        updateCartBadge();

        // Open cart modal to show newly added item
        openCart();
        renderCartItems();
      }

      // Remove product from cart
      function removeFromCart(productId) {
        delete cart[productId];
        saveCart();
        updateCartBadge();
        renderCartItems();
      }

      // Update product quantity in cart
      function updateQuantity(productId, newQty) {
        if (newQty < 1) return;
        cart[productId] = newQty;
        saveCart();
        updateCartBadge();
        renderCartItems();
      }

      // Update cart icon badge count
      function updateCartBadge() {
        const count = Object.values(cart).reduce((a,b) => a + b, 0);
        cartCountEl.textContent = count;
        if (count > 0) {
          cartBadge.textContent = count > 99 ? "99+" : count;
          cartBadge.classList.remove("hidden");
        } else {
          cartBadge.classList.add("hidden");
        }
      }

      // Open cart modal
      function openCart() {
        cartModal.classList.remove("hidden");
        document.body.style.overflow = "hidden"; // disable page scrolling
      }

      // Close cart modal
      function closeCart() {
        cartModal.classList.add("hidden");
        document.body.style.overflow = ""; // enable page scrolling
      }

      // Render cart items in modal
      function renderCartItems() {
        cartItemsContainer.innerHTML = "";
        const productIds = Object.keys(cart);
        if (productIds.length === 0) {
          emptyCartMsg.style.display = "block";
          cartTotalEl.textContent = "0.00";
          checkoutBtn.disabled = true;
          return;
        }
        emptyCartMsg.style.display = "none";

        let total = 0;
        productIds.forEach(pid => {
          const prod = allProducts.find(p => p.id == pid);
          if (!prod) return;

          const qty = cart[pid];
          total += prod.price * qty;

          const itemDiv = document.createElement("div");
          itemDiv.className = "flex items-center gap-3 border-b border-slate-200 pb-3";

          const img = document.createElement("img");
          img.src = prod.image;
          img.alt = prod.name + " image";
          img.className = "w-16 h-20 object-contain rounded-md flex-shrink-0";
          img.onerror = () => { img.style.display = "none"; };
          itemDiv.appendChild(img);

          const details = document.createElement("div");
          details.className = "flex-grow";

          const title = document.createElement("p");
          title.textContent = prod.name;
          title.className = "font-semibold text-sm text-slate-900 mb-1 line-clamp-2";
          details.appendChild(title);

          const priceQty = document.createElement("p");
          priceQty.textContent = `₹${prod.price.toFixed(2)} x ${qty} = ₹${(prod.price * qty).toFixed(2)}`;
          priceQty.className = "text-xs text-slate-700";
          details.appendChild(priceQty);

          itemDiv.appendChild(details);

          // Quantity controls
          const qtyControls = document.createElement("div");
          qtyControls.className = "flex flex-col gap-1 items-center";

          const qtyInput = document.createElement("input");
          qtyInput.type = "number";
          qtyInput.min = "1";
          qtyInput.value = qty;
          qtyInput.className = "w-12 border border-slate-300 rounded text-center text-sm focus:outline-none focus:ring-1 focus:ring-teal-500";
          qtyInput.addEventListener("change", (e) => {
            let newVal = parseInt(e.target.value);
            if (isNaN(newVal) || newVal < 1) {
              e.target.value = qty; // reset invalid
              return;
            }
            updateQuantity(pid, newVal);
          });
          qtyControls.appendChild(qtyInput);

          const removeBtn = document.createElement("button");
          removeBtn.type = "button";
          removeBtn.textContent = "Remove";
          removeBtn.className = "text-xs text-red-600 hover:underline";
          removeBtn.addEventListener("click", () => removeFromCart(pid));
          qtyControls.appendChild(removeBtn);

          itemDiv.appendChild(qtyControls);

          cartItemsContainer.appendChild(itemDiv);
        });
        cartTotalEl.textContent = total.toFixed(2);
        checkoutBtn.disabled = false;
      }

      // Debounce utility for search input
      function debounce(func, wait) {
        let timeout;
        return function(...args) {
          clearTimeout(timeout);
          timeout = setTimeout(() => func.apply(this, args), wait);
        };
      }

      // Page render based on current filters and sorting
      let filteredProducts = [];
      function renderFilteredSortedPaginated() {
        filteredProducts = filterProducts(allProducts);
        totalCountEl.textContent = filteredProducts.length;
        updatePagination(filteredProducts.length, currentPage);
        const paginated = paginateProducts(sortProducts(filteredProducts, currentSort), currentPage);
        renderProductCards(paginated);
        shownCountEl.textContent = paginated.length;
      }

      // Initialization of events
      function init() {
        // Brands checkboxes change
        brandCheckboxes.forEach(cb => cb.addEventListener("change", onFiltersChange));
        // Filter inputs change
        priceMinInput.addEventListener("input", onFiltersChange);
        priceMaxInput.addEventListener("input", onFiltersChange);
        discountMinInput.addEventListener("input", onFiltersChange);
        excludeOutStockCheckbox.addEventListener("change", onFiltersChange);
        clearFiltersBtn.addEventListener("click", () => {
          clearFilters();
          brandSearchInput.value = "";
        });

        // Brand search input debounce 
        brandSearchInput.addEventListener("input", debounce(onBrandSearch, 200));

        // Sort buttons
        sortButtons.forEach(btn => btn.addEventListener("click", onSortBtnClick));

        // Cart button & modal
        cartBtn.addEventListener("click", () => {
          openCart();
          renderCartItems();
        });
        closeCartBtn.addEventListener("click", closeCart);
        checkoutBtn.addEventListener("click", () => {
          alert("Thank you for your purchase! Cart checkout functionality can be implemented here.");
          cart = {};
          saveCart();
          updateCartBadge();
          renderCartItems();
          closeCart();
        });

        window.addEventListener("keydown", (e) => {
          if (e.key === "Escape" && !cartModal.classList.contains("hidden")) {
            closeCart();
          }
        });

        // Initial render
        loadCart();
        updateSortButtons();
        renderFilteredSortedPaginated();
      }

      // Run initialization on page load
      document.addEventListener("DOMContentLoaded", init);
    })();
  </script>
</body>
</html>